import axios from 'axios';

const bookMapping = {
  Genesis: 1,
  Exodus: 2,
  Leviticus: 3,
  Numbers: 4,
  Deuteronomy: 5,
  Joshua: 6,
  Judges: 7,
  Ruth: 8,
  '1 Samuel': 9,
  '2 Samuel': 10,
  '1 Kings': 11,
  '2 Kings': 12,
  '1 Chronicles': 13,
  '2 Chronicles': 14,
  Ezra: 15,
  Nehemiah: 16,
  Esther: 17,
  Job: 18,
  Psalm: 19,
  Proverbs: 20,
  Ecclesiastes: 21,
  'Song of Solomon': 22,
  Isaiah: 23,
  Jeremiah: 24,
  Lamentations: 25,
  Ezekiel: 26,
  Daniel: 27,
  Hosea: 28,
  Joel: 29,
  Amos: 30,
  Obadiah: 31,
  Jonah: 32,
  Micah: 33,
  Nahum: 34,
  Habakkuk: 35,
  Zephaniah: 36,
  Haggai: 37,
  Zechariah: 38,
  Malachi: 39,
  Matthew: 40,
  Mark: 41,
  Luke: 42,
  John: 43,
  Acts: 44,
  Romans: 45,
  '1 Corinthians': 46,
  '2 Corinthians': 47,
  Galatians: 48,
  Ephesians: 49,
  Philippians: 50,
  Colossians: 51,
  '1 Thessalonians': 52,
  '2 Thessalonians': 53,
  '1 Timothy': 54,
  '2 Timothy': 55,
  Titus: 56,
  Philemon: 57,
  Hebrews: 58,
  James: 59,
  '1 Peter': 60,
  '2 Peter': 61,
  '1 John': 62,
  '2 John': 63,
  '3 John': 64,
  Jude: 65,
  Revelation: 66,
};

export const verseToCode = (verse) => {
  const lastSpaceIndex = verse.lastIndexOf(' ');
  const bookName = verse.substring(0, lastSpaceIndex);
  const chapterVerse = verse.substring(lastSpaceIndex + 1).split(':');
  const chapter = parseInt(chapterVerse[0]);
  const verseNum = parseInt(chapterVerse[1]);

  const bookMapping = {
    Genesis: 1,
    Exodus: 2,
    Leviticus: 3,
    Numbers: 4,
    Deuteronomy: 5,
    Joshua: 6,
    Judges: 7,
    Ruth: 8,
    '1 Samuel': 9,
    '2 Samuel': 10,
    '1 Kings': 11,
    '2 Kings': 12,
    '1 Chronicles': 13,
    '2 Chronicles': 14,
    Ezra: 15,
    Nehemiah: 16,
    Esther: 17,
    Job: 18,
    Psalm: 19,
    Proverbs: 20,
    Ecclesiastes: 21,
    'Song of Solomon': 22,
    Isaiah: 23,
    Jeremiah: 24,
    Lamentations: 25,
    Ezekiel: 26,
    Daniel: 27,
    Hosea: 28,
    Joel: 29,
    Amos: 30,
    Obadiah: 31,
    Jonah: 32,
    Micah: 33,
    Nahum: 34,
    Habakkuk: 35,
    Zephaniah: 36,
    Haggai: 37,
    Zechariah: 38,
    Malachi: 39,
    Matthew: 40,
    Mark: 41,
    Luke: 42,
    John: 43,
    Acts: 44,
    Romans: 45,
    '1 Corinthians': 46,
    '2 Corinthians': 47,
    Galatians: 48,
    Ephesians: 49,
    Philippians: 50,
    Colossians: 51,
    '1 Thessalonians': 52,
    '2 Thessalonians': 53,
    '1 Timothy': 54,
    '2 Timothy': 55,
    Titus: 56,
    Philemon: 57,
    Hebrews: 58,
    James: 59,
    '1 Peter': 60,
    '2 Peter': 61,
    '1 John': 62,
    '2 John': 63,
    '3 John': 64,
    Jude: 65,
    Revelation: 66,
  };

  const bookID = bookMapping[bookName];
  const chapterID = chapter.toString().padStart(2, '0');
  const verseCode = verseNum.toString().padStart(2, '0');

  return {
    bookName,
    bookID,
    chapterID,
    verseCode,
    verseCodeString: `${bookID}0${chapterID}0${verseCode}`,
  };
};

export const getVerse = async (name) => {
  const verse = verseToCode(name);
  const url = `https://bible-go-api.rkeplin.com/v1/books/${verse.bookID}/chapters/${verse.chapterID}/${verse.verseCodeString}?translation=NIV`;
  const response = await axios.get(url);
  return response.data;
};

export const bibleBooks = [
  'Genesis',
  'Exodus',
  'Leviticus',
  'Numbers',
  'Deuteronomy',
  'Joshua',
  'Judges',
  'Ruth',
  '1 Samuel',
  '2 Samuel',
  '1 Kings',
  '2 Kings',
  '1 Chronicles',
  '2 Chronicles',
  'Ezra',
  'Nehemiah',
  'Esther',
  'Job',
  'Psalms',
  'Proverbs',
  'Ecclesiastes',
  'Song of Solomon',
  'Isaiah',
  'Jeremiah',
  'Lamentations',
  'Ezekiel',
  'Daniel',
  'Hosea',
  'Joel',
  'Amos',
  'Obadiah',
  'Jonah',
  'Micah',
  'Nahum',
  'Habakkuk',
  'Zephaniah',
  'Haggai',
  'Zechariah',
  'Malachi',
  'Matthew',
  'Mark',
  'Luke',
  'John',
  'Acts',
  'Romans',
  '1 Corinthians',
  '2 Corinthians',
  'Galatians',
  'Ephesians',
  'Philippians',
  'Colossians',
  '1 Thessalonians',
  '2 Thessalonians',
  '1 Timothy',
  '2 Timothy',
  'Titus',
  'Philemon',
  'Hebrews',
  'James',
  '1 Peter',
  '2 Peter',
  '1 John',
  '2 John',
  '3 John',
  'Jude',
  'Revelation',
];
export const niceVerses = [
  'Genesis 1:1',
  'Genesis 1:31',
  'Genesis 2:7',
  'Genesis 2:24',
  'Genesis 12:2',
  'Exodus 14:14',
  'Exodus 20:12',
  'Exodus 20:17',
  'Exodus 23:25',
  'Leviticus 19:18',
  'Deuteronomy 6:5',
  'Deuteronomy 31:6',
  'Joshua 1:9',
  'Joshua 24:15',
  'Ruth 1:16',
  '1 Samuel 16:7',
  '1 Samuel 17:47',
  '2 Samuel 22:31',
  '1 Kings 8:56',
  '1 Chronicles 16:11',
  '2 Chronicles 7:14',
  'Nehemiah 8:10',
  'Job 1:21',
  'Psalm 1:1',
  'Psalm 8:9',
  'Psalm 16:11',
  'Psalm 23:1',
  'Psalm 23:4',
  'Psalm 27:1',
  'Psalm 34:8',
  'Psalm 37:4',
  'Psalm 46:1',
  'Psalm 46:10',
  'Psalm 51:10',
  'Psalm 55:22',
  'Psalm 56:3',
  'Psalm 91:1',
  'Proverbs 3:5',
  'Proverbs 10:12',
  'Proverbs 16:3',
  'Proverbs 17:17',
  'Proverbs 18:24',
  'Proverbs 22:6',
  'Proverbs 31:25',
  'Ecclesiastes 3:1',
  'Ecclesiastes 3:11',
  'Isaiah 9:6',
  'Isaiah 26:3',
  'Isaiah 40:31',
  'Isaiah 41:10',
  'Isaiah 43:2',
  'Isaiah 53:5',
  'Jeremiah 29:11',
  'Jeremiah 33:3',
  'Lamentations 3:22',
  'Lamentations 3:23',
  'Ezekiel 36:26',
  'Daniel 12:3',
  'Hosea 6:3',
  'Joel 2:25',
  'Micah 6:8',
  'Habakkuk 3:17',
  'Zephaniah 3:17',
  'Haggai 2:9',
  'Zechariah 4:6',
  'Malachi 3:10',
  'Matthew 5:3',
  'Matthew 5:16',
  'Matthew 6:33',
  'Matthew 7:7',
  'Matthew 11:28',
  'Matthew 18:20',
  'Matthew 19:26',
  'Matthew 22:37',
  'Matthew 28:20',
  'Mark 10:27',
  'Mark 12:30',
  'Luke 1:37',
  'Luke 6:31',
  'Luke 10:27',
  'Luke 11:9',
  'Luke 12:34',
  'John 3:16',
  'John 6:35',
  'John 8:12',
  'John 10:10',
  'John 11:25',
  'John 14:27',
  'John 15:5',
  'John 16:33',
  'Acts 1:8',
  'Acts 4:12',
  'Romans 8:28',
  'Romans 12:12',
  'Romans 15:13',
  '1 Corinthians 10:13',
  '2 Corinthians 5:17',
  'Philippians 4:13',
  'Philippians 4:6',
  'Philippians 4:7',
  'Philippians 4:8',
  'Philippians 4:19',
  'Colossians 3:2',
  'Colossians 3:15',
  'Colossians 3:16',
  'Colossians 3:17',
  '1 Thessalonians 5:16',
  '1 Thessalonians 5:17',
  '1 Thessalonians 5:18',
  '1 Thessalonians 5:24',
  '2 Thessalonians 3:3',
  '1 Timothy 4:12',
  '1 Timothy 6:6',
  '1 Timothy 6:7',
  '2 Timothy 1:7',
  '2 Timothy 2:15',
  '2 Timothy 3:16',
  '2 Timothy 4:7',
  'Hebrews 4:12',
  'Hebrews 10:25',
  'Hebrews 11:1',
  'Hebrews 12:1',
  'James 1:2',
  'James 1:5',
  'James 1:17',
  'James 4:7',
  '1 Peter 5:7',
  '1 Peter 5:8',
  '1 Peter 5:10',
  '1 John 1:9',
  '1 John 4:7',
  '1 John 4:18',
  'Jude 1:24',
  'Revelation 3:20',
  'Revelation 21:4',
  'Revelation 22:13',
  'Revelation 22:21',
];

export const getRandomVerse = () => {
  const randomIndex = Math.floor(Math.random() * niceVerses.length);
  return getVerse(niceVerses[randomIndex]);
};

export const getChapter = async (bookName, chapterID, translation) => {
  const bookID = bookMapping[bookName];
  const url = `https://bible-go-api.rkeplin.com/v1/books/${bookID}/chapters/${chapterID}?translation=${translation}`;
  const response = await axios.get(url);
  //return an array of each verse in the chapter, just the .verse of each nothing else
  return response.data.map((verseObj) => verseObj.verse);
};

export const getChapterLength = async (bookName, chapterID) => {
  const bookID = bookMapping[bookName];
  const url = `https://bible-go-api.rkeplin.com/v1/books/${bookID}/chapters/${chapterID}`;
  const response = await axios.get(url);
  return response.data.verses.length;
};
